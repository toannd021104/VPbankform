<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VPBank - Đơn Nội Bộ HR</title>
    <link rel="stylesheet" href="styles.css" />

    <style>
      /* Wizard Styles */
      .wizard-progress {
        margin-bottom: 16px;
      }
      .wizard-steps {
        display: flex;
        gap: 8px;
      }
      .wizard-step {
        padding: 8px 12px;
        border-radius: 8px;
        background: #f2f4f7;
        font-weight: 600;
        opacity: 0.6;
      }
      .wizard-step.is-active,
      .wizard-step.is-done {
        opacity: 1;
        background: #e6f4ff;
      }
      .wizard-bar {
        height: 6px;
        background: #eef2f6;
        border-radius: 999px;
        overflow: hidden;
        margin-top: 8px;
      }
      .wizard-bar-fill {
        height: 100%;
        background: #1677ff;
        width: 0;
        transition: width 0.25s ease;
      }
      .wizard-step-pane.is-hidden {
        display: none;
      }
      .wizard-navigation {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
        margin-top: 30px;
        padding-top: 20px;
        border-top: 1px solid var(--border-color);
      }
    </style>

    <!-- Supabase SDK v2 (UMD) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <!-- Supabase inline config for Case 3 (can be overridden by envs on Vercel) -->
    <script>
      window.__SB_URL__ =
        window.__SB_URL__ || "https://hjoislprylonxnmawbwo.supabase.co";
      window.__SB_ANON__ =
        window.__SB_ANON__ ||
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imhqb2lzbHByeWxvbnhubWF3YndvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE5MDA2MzIsImV4cCI6MjA3NzQ3NjYzMn0._ZzZBYxpynKTM_Xw8-Jf8Wi53cJiTeE92u86osLIhEE";
      window.__ROW_ID__ = window.__ROW_ID__ || "use-case-3-hr-workflow";
      window.__TABLE__ = window.__TABLE__ || "hr_forms"; /* public.hr_forms */
    </script>
  </head>
  <body>
    <div class="container">
      <!-- Bỏ ràng buộc HTML5: thêm novalidate -->
      <form id="hrWorkflowForm" class="vpbank-form" novalidate>
        <div class="form-header">
          <h1>Đơn Nội Bộ HR</h1>
          <p>Hệ thống quản lý nhân sự - Human Resources</p>
        </div>

        <!-- Wizard Progress -->
        <div class="wizard-progress">
          <div class="wizard-steps">
            <div class="wizard-step is-active" data-step="1">Thông tin NV</div>
            <div class="wizard-step" data-step="2">Yêu cầu</div>
            <div class="wizard-step" data-step="3">Phê duyệt & Bổ sung</div>
          </div>
          <div class="wizard-bar">
            <div class="wizard-bar-fill" style="width: 33.33%"></div>
          </div>
        </div>

        <!-- Step 1: Employee Information -->
        <div class="wizard-step-pane" id="step1" data-step="1">
          <div class="form-section">
            <h2>Thông Tin Nhân Viên</h2>
            <div class="form-row">
              <div class="form-group">
                <label for="employeeName">Họ và Tên</label>
                <input type="text" id="employeeName" name="employeeName" />
              </div>

              <div class="form-group">
                <label for="employeeId">Mã Nhân Viên</label>
                <input type="text" id="employeeId" name="employeeId" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="department">Phòng Ban</label>
                <select id="department" name="department">
                  <option value="">-- Chọn phòng ban --</option>
                  <option value="retail-lending">Retail Lending</option>
                  <option value="customer-service">Customer Service</option>
                  <option value="human-resources">Human Resources</option>
                  <option value="risk-compliance">Risk & Compliance</option>
                  <option value="operations">Operations</option>
                  <option value="it">IT</option>
                  <option value="finance">Finance</option>
                  <option value="marketing">Marketing</option>
                  <option value="sales">Sales</option>
                  <option value="other">Khác</option>
                </select>
              </div>

              <div class="form-group">
                <label for="position">Chức Vụ</label>
                <input type="text" id="position" name="position" />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" />
              </div>

              <div class="form-group">
                <label for="phoneNumber">Số Điện Thoại</label>
                <input type="tel" id="phoneNumber" name="phoneNumber" />
              </div>
            </div>
          </div>

          <div class="wizard-navigation">
            <button type="button" class="btn-primary btn-next" data-next="2">
              Tiếp tục
            </button>
          </div>
        </div>

        <!-- Step 2: Request Information -->
        <div class="wizard-step-pane is-hidden" id="step2" data-step="2">
          <div class="form-section">
            <h2>Thông Tin Yêu Cầu</h2>

            <div class="form-group">
              <label for="requestType">Loại Đơn</label>
              <select id="requestType" name="requestType">
                <option value="">-- Chọn loại đơn --</option>
                <option value="leave">Nghỉ phép</option>
                <option value="business-trip">Công tác</option>
                <option value="training">Đào tạo</option>
                <option value="equipment">Yêu cầu trang thiết bị</option>
                <option value="reimbursement">Hoàn ứng chi phí</option>
                <option value="certificate">Xin giấy xác nhận</option>
                <option value="resignation">Xin nghỉ việc</option>
                <option value="other">Khác</option>
              </select>
            </div>

            <div class="form-group" id="leaveTypeGroup" style="display: none">
              <label for="leaveType">Loại Nghỉ Phép</label>
              <select id="leaveType" name="leaveType">
                <option value="">-- Chọn loại nghỉ phép --</option>
                <option value="annual">Nghỉ phép năm</option>
                <option value="sick">Nghỉ ốm</option>
                <option value="personal">Nghỉ cá nhân</option>
                <option value="unpaid">Nghỉ không lương</option>
                <option value="maternity">Nghỉ thai sản</option>
                <option value="paternity">Nghỉ chăm con</option>
                <option value="wedding">Nghỉ cưới</option>
                <option value="funeral">Nghỉ tang</option>
              </select>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label for="startDate">Ngày Bắt Đầu</label>
                <input type="date" id="startDate" name="startDate" />
              </div>

              <div class="form-group">
                <label for="endDate">Ngày Kết Thúc</label>
                <input type="date" id="endDate" name="endDate" />
              </div>
            </div>

            <div class="form-group">
              <label for="duration">Số Ngày</label>
              <input
                type="number"
                id="duration"
                name="duration"
                min="0"
                step="0.5"
              />
            </div>

            <div class="form-group">
              <label for="reason">Lý Do</label>
              <textarea
                id="reason"
                name="reason"
                placeholder="Mô tả lý do yêu cầu..."
              ></textarea>
            </div>
          </div>

          <div class="wizard-navigation">
            <button type="button" class="btn-secondary btn-prev" data-prev="1">
              Quay lại
            </button>
            <button type="button" class="btn-primary btn-next" data-next="3">
              Tiếp tục
            </button>
          </div>
        </div>

        <!-- Step 3: Approval & Additional Information -->
        <div class="wizard-step-pane is-hidden" id="step3" data-step="3">
          <!-- Approval Information -->
          <div class="form-section">
            <h2>Thông Tin Phê Duyệt</h2>
            <div class="form-row">
              <div class="form-group">
                <label for="managerName">Tên Quản Lý Trực Tiếp</label>
                <input type="text" id="managerName" name="managerName" />
              </div>

              <div class="form-group">
                <label for="managerEmail">Email Quản Lý</label>
                <input type="email" id="managerEmail" name="managerEmail" />
              </div>
            </div>

            <div class="form-group">
              <label for="approvalStatus">Trạng Thái</label>
              <select id="approvalStatus" name="approvalStatus">
                <option value="pending">Chờ phê duyệt</option>
                <option value="approved">Đã phê duyệt</option>
                <option value="rejected">Từ chối</option>
                <option value="cancelled">Đã hủy</option>
              </select>
            </div>

            <div
              class="form-group"
              id="rejectionReasonGroup"
              style="display: none"
            >
              <label for="rejectionReason">Lý Do Từ Chối</label>
              <textarea id="rejectionReason" name="rejectionReason"></textarea>
            </div>
          </div>

          <!-- Additional Information -->
          <div class="form-section">
            <h2>Thông Tin Bổ Sung</h2>
            <div class="form-group">
              <label for="submissionDate">Ngày Nộp Đơn</label>
              <input type="date" id="submissionDate" name="submissionDate" />
            </div>

            <div class="form-group">
              <label for="contactDuringAbsence"
                >Thông Tin Liên Lạc (Khi Nghỉ)</label
              >
              <input
                type="text"
                id="contactDuringAbsence"
                name="contactDuringAbsence"
                placeholder="Số điện thoại, email dự phòng"
              />
            </div>

            <div class="form-group">
              <label for="workHandover">Bàn Giao Công Việc</label>
              <textarea
                id="workHandover"
                name="workHandover"
                placeholder="Người nhận bàn giao, công việc cần xử lý..."
              ></textarea>
            </div>

            <div class="form-group">
              <label for="attachments">File Đính Kèm (nếu có)</label>
              <input type="file" id="attachments" name="attachments" multiple />
            </div>

            <div class="form-group">
              <label for="notes">Ghi Chú</label>
              <textarea
                id="notes"
                name="notes"
                placeholder="Các thông tin bổ sung khác..."
              ></textarea>
            </div>
          </div>

          <div class="wizard-navigation">
            <button type="button" class="btn-secondary" id="clearBtn">
              Xóa Form
            </button>
            <button type="button" class="btn-secondary btn-prev" data-prev="2">
              Quay lại
            </button>
            <button type="submit" class="btn-primary">Gửi đơn</button>
          </div>
        </div>
      </form>
    </div>

    <script src="script.js"></script>
  </body>
</html>
